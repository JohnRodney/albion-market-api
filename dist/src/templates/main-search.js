"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = searchScript;
function searchScript(itemNameMap, prices) {
  return "\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js\"></script>\n    <script>\n      function removeImages() {\n         $(\"img\").each(function(){\n            var image = $(this);\n            if(image.naturalWidth == 0 || image.readyState == 'uninitialized'){\n               $(image).unbind(\"error\").hide();\n            }\n         });\n      };\n    </script>\n    <script>\n      var itemNameMap = " + JSON.stringify(itemNameMap) + ";\n      window.prices = " + JSON.stringify(prices) + ";\n      document.addEventListener( \"change\", function(e) {\n        var matchedPrice = window.prices.filter(p => p.ItemTypeId === e.target.value);\n        matchedPrice = matchedPrice.sort(function(a, b) {\n          return parseFloat(a.UnitPriceSilver) - parseFloat(b.UnitPriceSilver);\n        });\n        var foundIds = [];\n        var finalArray = [];\n        matchedPrice = matchedPrice.forEach(function(price, i) {\n          console.log(price, foundIds, finalArray)\n          if (foundIds.indexOf(price.Id) === -1) {\n            foundIds.push(price.Id);\n            finalArray.push(price);\n          }\n        });\n        matchedPrice = finalArray;\n        var layout = '';\n        matchedPrice.forEach(function(price, i) {\n          layout += '<div class=\"a-price\">' +\n          '<img src=\"' + \"https://s3-us-west-2.amazonaws.com/ao2d/images/items/\"+ price.ItemTypeId +'.png\" onError=\"this.onerror=null;this.remove();\"/>' +\n          '<img src=\"' + \"https://gameinfo.albiononline.com/api/gameinfo/items/\"+ price.ItemTypeId +'.png\" onError=\"this.onerror=null;this.remove();\" />' +\n          '<div class=\"quantity\">' + price.Amount + '</div>' +\n          '<p>' + price.UnitPriceSilver / 10000 + ' silver</p>' + '</div>'\n        });\n        document.getElementById('price-value').innerHTML = layout;\n      });\n    </script>\n  ";
}